\hypertarget{_uai_8cs_source}{}\doxysection{Uai.\+cs}
\label{_uai_8cs_source}\index{Runtime/Models/Uai.cs@{Runtime/Models/Uai.cs}}
\mbox{\hyperlink{_uai_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00001}00001 \textcolor{keyword}{using }\mbox{\hyperlink{_boolean_notifier_8cs_a81a223a02c34d82b47199f08308847f2}{System}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00002}00002 \textcolor{keyword}{using }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00003}00003 \textcolor{keyword}{using }System.ComponentModel;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00004}00004 \textcolor{keyword}{using }System.Linq;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00005}00005 \textcolor{keyword}{using }System.Text;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00006}00006 \textcolor{keyword}{using }System.Threading.Tasks;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00007}00007 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_uni_rx_extension}{UniRxExtension}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00008}00008 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_uni_rx}{UniRx}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00009}00009 \textcolor{keyword}{using }UnityEngine;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00011}\mbox{\hyperlink{class_uai}{00011}} \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_uai}{Uai}}: \mbox{\hyperlink{class_ai_object_model}{AiObjectModel}}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00012}00012 \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00013}00013     \textcolor{keyword}{private} IDisposable bucketSub;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00014}00014     \textcolor{keyword}{private} IDisposable playableSub;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00015}00015     \textcolor{keyword}{private} \textcolor{keywordtype}{bool} isPLayAble;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00016}\mbox{\hyperlink{class_uai_a834deca3119f6638032ceb3262596171}{00016}}     \textcolor{keyword}{public} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_uai_a834deca3119f6638032ceb3262596171}{IsPLayAble}}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00017}00017     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00018}00018         \textcolor{keyword}{get} => isPLayAble;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00019}00019         \textcolor{keyword}{set}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00020}00020         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00021}00021             isPLayAble = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00022}00022             onIsPlayableChanged.\mbox{\hyperlink{class_uni_rx_1_1_subject_a4cbbe5730f3c9ea08287be64c1b7d008}{OnNext}}(value);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00023}00023         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00024}00024     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00025}00025     \textcolor{keyword}{internal} \mbox{\hyperlink{interface_uni_rx_1_1_i_observable}{IObservable<bool>}} OnIsPlayableChanged => onIsPlayableChanged;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00026}00026     \textcolor{keyword}{private} readonly \mbox{\hyperlink{class_uni_rx_1_1_subject}{Subject<bool>}} onIsPlayableChanged = \textcolor{keyword}{new} \mbox{\hyperlink{class_uni_rx_1_1_subject}{Subject<bool>}} ();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00027}00027     \textcolor{keyword}{private} \mbox{\hyperlink{class_uni_rx_extension_1_1_reactive_list_name_safe}{ReactiveListNameSafe<Bucket>}} buckets = \textcolor{keyword}{new} \mbox{\hyperlink{class_uni_rx_extension_1_1_reactive_list_name_safe}{ReactiveListNameSafe<Bucket>}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00028}\mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{00028}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_uni_rx_extension_1_1_reactive_list_name_safe}{ReactiveListNameSafe<Bucket>}} \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00029}00029     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00030}00030         \textcolor{keyword}{get} => buckets;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00031}00031         \textcolor{keyword}{private} \textcolor{keyword}{set}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00032}00032         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00033}00033             buckets = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00034}00034             bucketSub?.Dispose();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00036}00036             \textcolor{keywordflow}{if} (buckets == \textcolor{keyword}{null}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00037}00037             \mbox{\hyperlink{class_uai_ab779c6efe659eb4dd3d86c7e8d5d8cfc}{UpdateInfo}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00038}00038             bucketSub = buckets.OnValueChanged}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00039}00039                 .Subscribe(\_ => \mbox{\hyperlink{class_uai_ab779c6efe659eb4dd3d86c7e8d5d8cfc}{UpdateInfo}}());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00040}00040         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00041}00041     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00042}00042     \textcolor{keyword}{internal} readonly \mbox{\hyperlink{interface_i_ai_context}{IAiContext}} UaiContext = \textcolor{keyword}{new} \mbox{\hyperlink{class_ai_context}{AiContext}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00044}\mbox{\hyperlink{class_uai_afb611533a04a79917f82c7b9f7c5a99e}{00044}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_uai_afb611533a04a79917f82c7b9f7c5a99e}{Uai}}(): base()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00045}00045     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00046}00046         bucketSub = buckets.OnValueChanged}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00047}00047             .Subscribe(\_ => \mbox{\hyperlink{class_uai_ab779c6efe659eb4dd3d86c7e8d5d8cfc}{UpdateInfo}}());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00049}00049         playableSub?.Dispose();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00050}00050         playableSub = OnIsPlayableChanged}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00051}00051             .\mbox{\hyperlink{interface_uni_rx_1_1_i_observable_a81a2566f451cf1ddc8de265d019d1b88}{Subscribe}}(\_ => \mbox{\hyperlink{class_uai_ab779c6efe659eb4dd3d86c7e8d5d8cfc}{UpdateInfo}}());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00052}00052         \mbox{\hyperlink{class_ai_object_model_a5b2286d2138f54d4499c1926354ace70}{BaseAiObjectType}} = typeof(\mbox{\hyperlink{class_uai}{Uai}});}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00053}00053     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00056}\mbox{\hyperlink{class_uai_ada78c8d6324c435691cc2658ef1ccbf8}{00056}}     \textcolor{keyword}{protected} \textcolor{keyword}{override} \mbox{\hyperlink{class_ai_object_model}{AiObjectModel}} \mbox{\hyperlink{class_uai_ada78c8d6324c435691cc2658ef1ccbf8}{InternalClone}}()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00057}00057     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00058}00058         var clone = (\mbox{\hyperlink{class_uai_afb611533a04a79917f82c7b9f7c5a99e}{Uai}}) AiObjectFactory.CreateInstance(typeof(\mbox{\hyperlink{class_uai}{Uai}}));}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00059}00059         clone.Buckets = \textcolor{keyword}{new} \mbox{\hyperlink{class_uni_rx_extension_1_1_reactive_list_name_safe}{ReactiveListNameSafe<Bucket>}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00060}00060         \textcolor{keywordflow}{foreach} (var c \textcolor{keywordflow}{in} \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.Values.Select(b => b.Clone() as \mbox{\hyperlink{class_bucket}{Bucket}}))}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00061}00061         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00062}00062             clone.Buckets.Add(c);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00063}00063         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00064}00064         clone.bucketSub?.Dispose();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00065}00065         clone.UpdateInfo();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00066}00066         clone.bucketSub = clone.buckets.OnValueChanged}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00067}00067             .Subscribe(\_ => clone.UpdateInfo());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00069}00069         clone.playableSub?.Dispose();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00070}00070         clone.playableSub = clone.OnIsPlayableChanged}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00071}00071             .Subscribe(\_ => clone.UpdateInfo());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00072}00072         \textcolor{keywordflow}{return} clone;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00073}00073     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00075}\mbox{\hyperlink{class_uai_ab779c6efe659eb4dd3d86c7e8d5d8cfc}{00075}}     \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uai_ab779c6efe659eb4dd3d86c7e8d5d8cfc}{UpdateInfo}}()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00076}00076     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00077}00077         base.UpdateInfo();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00078}00078         \textcolor{keywordflow}{if}(\mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}} == \textcolor{keyword}{null} || \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.Count == 0)}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00079}00079         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00080}00080             Info = \textcolor{keyword}{new} InfoModel(\textcolor{stringliteral}{"{}No Buckets, Object won't be selected"{}}, InfoTypes.Warning);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00081}00081         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00082}00082         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_uai_a834deca3119f6638032ceb3262596171}{IsPLayAble}})}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00083}00083         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00084}00084             Info = \textcolor{keyword}{new} InfoModel(\textcolor{stringliteral}{"{}Not marked playable, Ai won't be selected"{}}, InfoTypes.Warning);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00085}00085         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00086}00086         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00087}00087         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00088}00088             Info = \textcolor{keyword}{new} InfoModel();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00089}00089         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00090}00090     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00092}\mbox{\hyperlink{class_uai_ab7eafbeaa77fdb46302530ef36237e83}{00092}}     \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uai_ab7eafbeaa77fdb46302530ef36237e83}{SetParent}}(\mbox{\hyperlink{class_ai_object_model}{AiObjectModel}} parent, \textcolor{keywordtype}{int} indexInParent)}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00093}00093     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00094}00094         base.SetParent(parent,indexInParent);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00095}00095         \textcolor{keywordflow}{foreach} (var bucket \textcolor{keywordflow}{in} \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.Values)}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00096}00096         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00097}00097             bucket.SetParent(\textcolor{keyword}{this},\mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.Values.IndexOf(bucket));}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00098}00098         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00099}00099     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00100}00100 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00101}00101     \textcolor{keyword}{internal} \textcolor{keyword}{override} \mbox{\hyperlink{class_restore_state}{RestoreState}} GetState()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00102}00102     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00103}00103         \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_uai_state}{UaiState}}(\mbox{\hyperlink{class_ai_object_model_a8e121beeb65ae729387702b132bbe6ec}{Name}}, \mbox{\hyperlink{class_ai_object_model_adab42d538c709b620941c13f27c0ee0b}{Description}}, \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.Values, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00104}00104     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00105}00105 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00106}00106     \textcolor{keyword}{private} \mbox{\hyperlink{class_utility_container_selector}{UtilityContainerSelector}} currentBucketSelector;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00107}\mbox{\hyperlink{class_uai_ad7ae50b0074e50dd7c770e2c6f97a642}{00107}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_utility_container_selector}{UtilityContainerSelector}} \mbox{\hyperlink{class_uai_ad7ae50b0074e50dd7c770e2c6f97a642}{CurrentBucketSelector}}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00108}00108     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00109}00109         \textcolor{keyword}{get} => currentBucketSelector ??= BucketSelectors.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00110}00110         \textcolor{keyword}{set} => currentBucketSelector = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00111}00111     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00112}00112     \textcolor{keyword}{private} List<UtilityContainerSelector> bucketSelectors;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00113}00113     \textcolor{keyword}{internal} List<UtilityContainerSelector> BucketSelectors}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00114}00114     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00115}00115         \textcolor{keyword}{get} =>}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00116}00116             bucketSelectors ??= \textcolor{keyword}{new} List<UtilityContainerSelector>(AssetService}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00117}00117                 .GetInstancesOfType<UtilityContainerSelector>());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00118}00118         \textcolor{keyword}{set} => bucketSelectors = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00119}00119     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00121}00121     \textcolor{keyword}{private} \mbox{\hyperlink{class_utility_container_selector}{UtilityContainerSelector}} currentDecisionSelector;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00122}\mbox{\hyperlink{class_uai_af438e9503342408bd7518cb0cd780363}{00122}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_utility_container_selector}{UtilityContainerSelector}} \mbox{\hyperlink{class_uai_af438e9503342408bd7518cb0cd780363}{CurrentDecisionSelector}}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00123}00123     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00124}00124         \textcolor{keyword}{get} => currentDecisionSelector ??= DecisionSelectors.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00125}00125         \textcolor{keyword}{set} => currentDecisionSelector = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00126}00126     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00127}00127     \textcolor{keyword}{private} List<UtilityContainerSelector> decisionSelectors;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00128}00128     \textcolor{keyword}{internal} List<UtilityContainerSelector> DecisionSelectors}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00129}00129     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00130}00130         \textcolor{keyword}{get} =>}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00131}00131             decisionSelectors ??= \textcolor{keyword}{new} List<UtilityContainerSelector>(AssetService}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00132}00132                 .GetInstancesOfType<UtilityContainerSelector>());}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00133}00133         \textcolor{keyword}{set} => decisionSelectors = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00134}00134     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00135}00135 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00136}00136     \textcolor{keyword}{private} \mbox{\hyperlink{interface_i_utility_scorer}{IUtilityScorer}} utilityScorer;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00137}00137     \textcolor{keyword}{internal} \mbox{\hyperlink{interface_i_utility_scorer}{IUtilityScorer}} UtilityScorer}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00138}00138     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00139}00139         \textcolor{keyword}{get}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00140}00140         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00141}00141             \textcolor{keywordflow}{return} utilityScorer ??= AssetService.GetInstancesOfType<\mbox{\hyperlink{interface_i_utility_scorer}{IUtilityScorer}}>()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00142}00142                 .FirstOrDefault(e => e.GetName() == Consts.Default\_UtilityScorer);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00143}00143         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00144}00144         \textcolor{keyword}{set}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00145}00145         \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00146}00146             utilityScorer = value;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00147}00147             UaiContext.UtilityScorer = UtilityScorer;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00148}00148         \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00149}00149     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00151}\mbox{\hyperlink{class_uai_a6833796a131a6c7ced60be9239d7a9af}{00151}}     \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_uai_a6833796a131a6c7ced60be9239d7a9af}{ClearSubscriptions}}()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00152}00152     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00153}00153         base.ClearSubscriptions();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00154}00154         bucketSub?.Dispose();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00155}00155         playableSub?.Dispose();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00156}00156     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00157}00157 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00158}\mbox{\hyperlink{class_uai_a9abf8edb7b7b18ef920059c80cdf34a4}{00158}}     \textcolor{keyword}{protected} \textcolor{keyword}{override} async Task \mbox{\hyperlink{class_uai_a9abf8edb7b7b18ef920059c80cdf34a4}{RestoreInternalAsync}}(\mbox{\hyperlink{class_restore_state}{RestoreState}} s, \textcolor{keywordtype}{bool} restoreDebug = \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00159}00159     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00160}00160         var state = (\mbox{\hyperlink{class_uai_state}{UaiState}})s;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00161}00161         \mbox{\hyperlink{class_ai_object_model_a8e121beeb65ae729387702b132bbe6ec}{Name}} = state.Name;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00162}00162         \mbox{\hyperlink{class_ai_object_model_adab42d538c709b620941c13f27c0ee0b}{Description}} = state.Description;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00163}00163         \mbox{\hyperlink{class_uai_a834deca3119f6638032ceb3262596171}{IsPLayAble}} = state.IsPLayable;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00164}00164         }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00165}00165         \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}} = \textcolor{keyword}{new} \mbox{\hyperlink{class_uni_rx_extension_1_1_reactive_list_name_safe}{ReactiveListNameSafe<Bucket>}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00166}00166         var bucketsLocal = await RestoreAbleService}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00167}00167             .GetAiObjectsSortedByIndex<\mbox{\hyperlink{class_bucket}{Bucket}}>(\mbox{\hyperlink{class_restore_able_a01e4768f5f26b7611167be8ee015b55b}{CurrentDirectory}} + Consts.FolderName\_Buckets, restoreDebug);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00168}00168         \mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.\mbox{\hyperlink{class_uni_rx_extension_1_1_reactive_list_name_safe_a5c70c08ff4aed09979cefb3d2d3d9bc7}{Add}}(RestoreAbleService.OrderByNames(state.Buckets, bucketsLocal));}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00170}00170         BucketSelectors = await RestoreAbleService.GetUcs(\mbox{\hyperlink{class_restore_able_a01e4768f5f26b7611167be8ee015b55b}{CurrentDirectory}} + Consts.FolderName\_BucketSelectors, restoreDebug);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00171}00171         \mbox{\hyperlink{class_uai_ad7ae50b0074e50dd7c770e2c6f97a642}{CurrentBucketSelector}} = BucketSelectors}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00172}00172             .FirstOrDefault(d => d.GetName() == state.CurrentBucketSelectorName) ?? }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00173}00173                 BucketSelectors.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00175}00175         DecisionSelectors = await RestoreAbleService.GetUcs(\mbox{\hyperlink{class_restore_able_a01e4768f5f26b7611167be8ee015b55b}{CurrentDirectory}} + Consts.FolderName\_DecisionSelectors, restoreDebug);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00176}00176         \mbox{\hyperlink{class_uai_af438e9503342408bd7518cb0cd780363}{CurrentDecisionSelector}} = DecisionSelectors}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00177}00177                     .FirstOrDefault(d => d.GetName() == state.CurrentDecisionSelectorName) ?? }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00178}00178                                   DecisionSelectors.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00179}00179 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00180}00180         var utilityScorers = AssetService.GetInstancesOfType<\mbox{\hyperlink{interface_i_utility_scorer}{IUtilityScorer}}>();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00181}00181         UtilityScorer = utilityScorers}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00182}00182                             .FirstOrDefault(u => u.GetName() == state.USName) ?? }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00183}00183                         utilityScorers.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00184}00184     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00185}00185 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00186}\mbox{\hyperlink{class_uai_a8c908ec27b7031ec12aa085335fa9fe4}{00186}}     \textcolor{keyword}{protected} \textcolor{keyword}{override} async Task \mbox{\hyperlink{class_uai_a8c908ec27b7031ec12aa085335fa9fe4}{InternalSaveToFile}}(\textcolor{keywordtype}{string} path, \mbox{\hyperlink{interface_i_persister}{IPersister}} persister, \mbox{\hyperlink{class_restore_state}{RestoreState}} state)}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00187}00187     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00188}00188         await persister.SaveObjectAsync(state, path + \textcolor{stringliteral}{"{}."{}} + Consts.FileExtension\_UAI);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00189}00189         await RestoreAbleService.SaveRestoreAblesToFile(\mbox{\hyperlink{class_uai_a71531544fe995cc9f3e541e8804b8c8d}{Buckets}}.Values,path + \textcolor{stringliteral}{"{}/"{}} + Consts.FolderName\_Buckets, persister);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00190}00190         await RestoreAbleService.SaveRestoreAblesToFile(BucketSelectors,path + \textcolor{stringliteral}{"{}/"{}} + Consts.FolderName\_BucketSelectors, persister);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00191}00191         await RestoreAbleService.SaveRestoreAblesToFile(DecisionSelectors,path + \textcolor{stringliteral}{"{}/"{}} + Consts.FolderName\_DecisionSelectors, persister);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00192}00192     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00193}00193 \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00194}00194 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00195}\mbox{\hyperlink{class_uai_state}{00195}} \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_uai_state}{UaiState}}: \mbox{\hyperlink{class_ai_object_state}{AiObjectState}}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00196}00196 \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00197}\mbox{\hyperlink{class_uai_state_a3a6bff3b5b380da31f55f531edfd969e}{00197}}     \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_uai_state_a3a6bff3b5b380da31f55f531edfd969e}{Name}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00198}\mbox{\hyperlink{class_uai_state_a3a424e502f9b45197d3f2b87d7565a5c}{00198}}     \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_uai_state_a3a424e502f9b45197d3f2b87d7565a5c}{Description}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00199}\mbox{\hyperlink{class_uai_state_a681df326c8287dd5c5ae2aafd56cadd8}{00199}}     \textcolor{keyword}{public} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_uai_state_a681df326c8287dd5c5ae2aafd56cadd8}{IsPLayable}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00200}\mbox{\hyperlink{class_uai_state_a5285ec5c84c1654a55f7bf6c0d77bf22}{00200}}     \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_uai_state_a5285ec5c84c1654a55f7bf6c0d77bf22}{CurrentBucketSelectorName}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00201}\mbox{\hyperlink{class_uai_state_a656614280c1e9c89399dbc59c8c1464e}{00201}}     \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_uai_state_a656614280c1e9c89399dbc59c8c1464e}{CurrentDecisionSelectorName}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00202}\mbox{\hyperlink{class_uai_state_aed6ce568eb20dc70acc3b17d4a11c3c7}{00202}}     \textcolor{keyword}{public} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_uai_state_aed6ce568eb20dc70acc3b17d4a11c3c7}{USName}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00203}00203 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00204}\mbox{\hyperlink{class_uai_state_aa0a9488f1d34543a48649bb0ff1ea27e}{00204}}     \textcolor{keyword}{public} List<string> \mbox{\hyperlink{class_uai_state_aa0a9488f1d34543a48649bb0ff1ea27e}{Buckets}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00205}00205 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00206}\mbox{\hyperlink{class_uai_state_aa292852696a15e07db4ceee7ffb4f550}{00206}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_uai_state_aa292852696a15e07db4ceee7ffb4f550}{UaiState}}() : base()}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00207}00207     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00208}00208     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00210}\mbox{\hyperlink{class_uai_state_a6563fba443bc1537f74e126f260f8c20}{00210}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_uai_state_a6563fba443bc1537f74e126f260f8c20}{UaiState}}(\textcolor{keywordtype}{string} name, \textcolor{keywordtype}{string} description, List<Bucket> buckets, \mbox{\hyperlink{class_uai}{Uai}} model): base(model)}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00211}00211     \{}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00212}00212         \mbox{\hyperlink{class_uai_state_a3a6bff3b5b380da31f55f531edfd969e}{Name}} = name;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00213}00213         \mbox{\hyperlink{class_uai_state_a3a424e502f9b45197d3f2b87d7565a5c}{Description}} = description;}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00214}00214         \mbox{\hyperlink{class_uai_state_a681df326c8287dd5c5ae2aafd56cadd8}{IsPLayable}} = model.\mbox{\hyperlink{class_uai_a834deca3119f6638032ceb3262596171}{IsPLayAble}};}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00215}00215         }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00216}00216         \mbox{\hyperlink{class_uai_state_aa0a9488f1d34543a48649bb0ff1ea27e}{Buckets}} = RestoreAbleService.NamesToList(buckets);}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00217}00217 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00218}00218         \mbox{\hyperlink{class_uai_state_a5285ec5c84c1654a55f7bf6c0d77bf22}{CurrentBucketSelectorName}} = model.\mbox{\hyperlink{class_uai_ad7ae50b0074e50dd7c770e2c6f97a642}{CurrentBucketSelector}}?.\mbox{\hyperlink{class_utility_container_selector_a75889076feb035ef8d5a2731e3c6e4ce}{GetName}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00219}00219         \mbox{\hyperlink{class_uai_state_a656614280c1e9c89399dbc59c8c1464e}{CurrentDecisionSelectorName}} = model.\mbox{\hyperlink{class_uai_af438e9503342408bd7518cb0cd780363}{CurrentDecisionSelector}}?.\mbox{\hyperlink{class_utility_container_selector_a75889076feb035ef8d5a2731e3c6e4ce}{GetName}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00220}00220 }
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00221}00221         \mbox{\hyperlink{class_uai_state_aed6ce568eb20dc70acc3b17d4a11c3c7}{USName}} = model.UtilityScorer.\mbox{\hyperlink{interface_i_identifier_a8a9c019d04f7a2dccb14a8d8dc5cc05f}{GetName}}();}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00222}00222     \}}
\DoxyCodeLine{\Hypertarget{_uai_8cs_source_l00223}00223 \}}

\end{DoxyCode}
