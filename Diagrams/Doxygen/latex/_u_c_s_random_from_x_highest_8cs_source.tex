\hypertarget{_u_c_s_random_from_x_highest_8cs_source}{}\doxysection{UCSRandom\+From\+XHighest.\+cs}
\label{_u_c_s_random_from_x_highest_8cs_source}\index{Runtime/Services/Scorers/UtilityContainerSelector/UCSRandomFromXHighest.cs@{Runtime/Services/Scorers/UtilityContainerSelector/UCSRandomFromXHighest.cs}}
\mbox{\hyperlink{_u_c_s_random_from_x_highest_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00001}00001 \textcolor{keyword}{using }\mbox{\hyperlink{_boolean_notifier_8cs_a81a223a02c34d82b47199f08308847f2}{System}};}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00002}00002 \textcolor{keyword}{using }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00003}00003 \textcolor{keyword}{using }System.Linq;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00004}00004 \textcolor{keyword}{using }System.Text;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00005}00005 \textcolor{keyword}{using }System.Threading.Tasks;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00007}00007 \textcolor{keyword}{internal} \textcolor{keyword}{class }UCSRandomFromXHighest : \mbox{\hyperlink{class_utility_container_selector}{UtilityContainerSelector}}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00008}00008 \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00009}00009     \textcolor{keyword}{private} \textcolor{keywordtype}{int} NumberOfItemsToEvaluate}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00010}00010     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00011}00011         \textcolor{keyword}{get}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00012}00012         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00013}00013             var val = Convert.ToInt32(\mbox{\hyperlink{class_utility_container_selector_a9663a61b560dea741124e88eed0e26de}{GetParameter}}(\textcolor{stringliteral}{"{}Number Of Items"{}}).Value);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00014}00014             \textcolor{keywordflow}{if} (val > 0)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00015}00015             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00016}00016                 \textcolor{keywordflow}{return} val;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00017}00017             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00018}00018             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00019}00019                 \textcolor{keywordflow}{return} \textcolor{keywordtype}{int}.MaxValue;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00020}00020             \}       }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00022}00022     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00023}00023     \textcolor{keyword}{private} \textcolor{keywordtype}{bool} PercentageChance => (bool)\mbox{\hyperlink{class_utility_container_selector_a9663a61b560dea741124e88eed0e26de}{GetParameter}}(\textcolor{stringliteral}{"{}Percentage chance"{}}).\mbox{\hyperlink{class_parameter_a8b78365aa2ccbdefc1536d576d5fdba7}{Value}};}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00025}00025     \textcolor{keyword}{private} \textcolor{keywordtype}{float} MaxDeviationFromHighest => Convert.ToSingle(\mbox{\hyperlink{class_utility_container_selector_a9663a61b560dea741124e88eed0e26de}{GetParameter}}(\textcolor{stringliteral}{"{}Max deviation from highest"{}}).\mbox{\hyperlink{class_parameter_a8b78365aa2ccbdefc1536d576d5fdba7}{Value}});}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00026}00026     \textcolor{keyword}{protected} \textcolor{keyword}{override} List<Parameter> \mbox{\hyperlink{class_utility_container_selector_ad70f3f8db136620d271d15d1c769e4d4}{GetParameters}}()}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00027}00027     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00028}00028         \textcolor{keywordflow}{return} \textcolor{keyword}{new} List<Parameter>()}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00029}00029         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00030}00030             \textcolor{keyword}{new} \mbox{\hyperlink{class_parameter}{Parameter}}(\textcolor{stringliteral}{"{}Number Of Items"{}}, 1),}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00031}00031             \textcolor{keyword}{new} \mbox{\hyperlink{class_parameter}{Parameter}}(\textcolor{stringliteral}{"{}Percentage chance"{}}, \textcolor{keyword}{true}),}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00032}00032             \textcolor{keyword}{new} \mbox{\hyperlink{class_parameter}{Parameter}}(\textcolor{stringliteral}{"{}Max deviation from highest"{}}, 1f)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00033}00033         \};}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00034}00034     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00035}00035     \textcolor{keyword}{public} \textcolor{keyword}{override} \mbox{\hyperlink{class_bucket}{Bucket}} \mbox{\hyperlink{class_utility_container_selector_a7b1818d050304feb5e1d3521764bc528}{GetBestUtilityContainer}}(List<Bucket> buckets, \mbox{\hyperlink{interface_i_ai_context}{IAiContext}} context)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00036}00036     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00037}00037         buckets = buckets}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00038}00038             .OrderByDescending(b => b.Weight)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00039}00039             .ToList();}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00041}00041         var result = \textcolor{keyword}{new} List<UtilityContainer>();}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00043}00043         \textcolor{keywordflow}{foreach}(\mbox{\hyperlink{class_bucket}{Bucket}} bucket \textcolor{keywordflow}{in} buckets)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00044}00044         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00045}00045             var lowestValidValue = GetLowestValidValue(result);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00046}00046             \textcolor{keywordflow}{if} (Convert.ToSingle(bucket.\mbox{\hyperlink{class_bucket_a583db20a61506e3527ccd93453ad7270}{Weight}}.\mbox{\hyperlink{class_parameter_a8b78365aa2ccbdefc1536d576d5fdba7}{Value}}) < lowestValidValue)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00047}00047             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00048}00048                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00049}00049             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00050}00050             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00051}00051                 context.CurrentEvaluatedBucket = bucket;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00052}00052                 bucket.GetUtility(context);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00053}00053                 result = UpdateList(result, bucket);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00054}00054             \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00055}00055         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00056}00056         \textcolor{keywordflow}{return} (\mbox{\hyperlink{class_bucket}{Bucket}})GetRandomContainer(result);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00058}00058     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00060}00060     \textcolor{keyword}{public} \textcolor{keyword}{override} \mbox{\hyperlink{class_decision}{Decision}} \mbox{\hyperlink{class_utility_container_selector_a7b1818d050304feb5e1d3521764bc528}{GetBestUtilityContainer}}(List<Decision> decisions, \mbox{\hyperlink{interface_i_ai_context}{IAiContext}} context)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00061}00061     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00062}00062         var result = \textcolor{keyword}{new} List<UtilityContainer>();}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00063}00063         \textcolor{keywordflow}{foreach} (\mbox{\hyperlink{class_decision}{Decision}} decision \textcolor{keywordflow}{in} decisions)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00064}00064         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00065}00065             context.CurrentEvaluatedDecision = decision;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00066}00066             decision.GetUtility(context);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00067}00067             result = UpdateList(result, decision);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00068}00068         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00069}00069         \textcolor{keywordflow}{return} (\mbox{\hyperlink{class_decision}{Decision}})GetRandomContainer(result);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00070}00070     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00072}00072     \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_utility_container_selector_a2dfcf89b2aeb9853bbd3ae530bdc13ed}{GetDescription}}()}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00073}00073     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00074}00074         \textcolor{keywordflow}{return} Consts.UCS\_RandomXHighest\_Description;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00075}00075     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00077}00077     \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{string} \mbox{\hyperlink{class_utility_container_selector_a75889076feb035ef8d5a2731e3c6e4ce}{GetName}}()}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00078}00078     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00079}00079         \textcolor{keywordflow}{return} Consts.UCS\_RandomXHighest\_Name;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00080}00080     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00082}00082     \textcolor{keyword}{private} List<UtilityContainer> UpdateList(List<UtilityContainer> list, \mbox{\hyperlink{class_utility_container}{UtilityContainer}} container)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00083}00083     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00084}00084         \textcolor{keywordflow}{if} (container.\mbox{\hyperlink{class_utility_container_a8ff324e3f5c6b3f73e6166ec8f1bde68}{LastCalculatedUtility}} <= 0 )}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00085}00085         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00086}00086             \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00087}00087         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00088}00088 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00089}00089         \textcolor{comment}{// Return if score is to far from highest score.}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00090}00090         var highestValid = list.FirstOrDefault();}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00091}00091         }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00092}00092         \textcolor{keywordflow}{if} (highestValid != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00093}00093         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00094}00094             \textcolor{keywordflow}{if} (list.IndexOf(highestValid) > NumberOfItemsToEvaluate -\/ 1)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00095}00095             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00096}00096                 highestValid = list[NumberOfItemsToEvaluate -\/ 1];}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00097}00097             \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00098}00098             var minimumAllowedScore = highestValid.LastCalculatedUtility -\/ MaxDeviationFromHighest;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00099}00099             \textcolor{keywordflow}{if} (container.\mbox{\hyperlink{class_utility_container_a8ff324e3f5c6b3f73e6166ec8f1bde68}{LastCalculatedUtility}} < minimumAllowedScore)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00100}00100             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00101}00101                 \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00102}00102             \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00103}00103         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00105}00105         var evaluateIndex = NumberOfItemsToEvaluate -\/ 1;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00106}00106 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00107}00107         \textcolor{keywordflow}{if} (list.Count < NumberOfItemsToEvaluate)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00108}00108         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00109}00109             list.Add(container);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00110}00110         \} }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00111}00111         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (container.\mbox{\hyperlink{class_utility_container_a8ff324e3f5c6b3f73e6166ec8f1bde68}{LastCalculatedUtility}} < list[evaluateIndex].LastCalculatedUtility)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00112}00112         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00113}00113             \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00114}00114         \} }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00115}00115         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (container.\mbox{\hyperlink{class_utility_container_a8ff324e3f5c6b3f73e6166ec8f1bde68}{LastCalculatedUtility}} < list[evaluateIndex].LastCalculatedUtility)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00116}00116         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00117}00117             var rand = UnityEngine.Random.Range(0, 2);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00118}00118             \textcolor{keywordflow}{if} (rand == 0) \textcolor{comment}{// Swapping two equally scored containers at random}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00119}00119             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00120}00120                 list[evaluateIndex] = container;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00121}00121             \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00122}00122         \} }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00123}00123         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00124}00124         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00125}00125             list.Add(container);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00126}00126         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00127}00127         list = list}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00128}00128             .OrderByDescending(uc => uc.LastCalculatedUtility)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00129}00129             .ToList();}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00130}00130         \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00131}00131     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00132}00132 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00133}00133     \textcolor{keyword}{private} \mbox{\hyperlink{class_utility_container}{UtilityContainer}} GetRandomContainer(List<UtilityContainer> list)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00134}00134     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00135}00135         \textcolor{keywordflow}{if} (list.Count == 0)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00136}00136         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00137}00137             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"{}No items to chose from, list.Count must be > 0"{}});}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00138}00138         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00139}00139         var numberOfItems = NumberOfItemsToEvaluate < list.Count ? NumberOfItemsToEvaluate : list.Count;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00141}00141         \textcolor{keywordflow}{if} (PercentageChance)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00142}00142         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00143}00143             var sum = list}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00144}00144                 .Take(numberOfItems)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00145}00145                 .Where(uc => uc != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00146}00146                 .Sum(uc => uc.LastCalculatedUtility);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00147}00147             }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00148}00148 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00149}00149             var resultNumber = UnityEngine.Random.Range(0, sum);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00150}00150             \textcolor{keywordflow}{for}(var i = 0; i < numberOfItems; i++)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00151}00151             \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00152}00152                 resultNumber -\/= list[i].LastCalculatedUtility;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00153}00153                 \textcolor{keywordflow}{if}(resultNumber <= 0)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00154}00154                 \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00155}00155                     \textcolor{keywordflow}{return} list[i];}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00156}00156                 \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00157}00157             \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00158}00158         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00159}00159         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00160}00160         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00161}00161             var rand = UnityEngine.Random.Range(0, numberOfItems);}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00162}00162             \textcolor{keywordflow}{return} list[rand];}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00163}00163         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00165}00165         \textcolor{keywordflow}{throw} \textcolor{keyword}{new} Exception(\textcolor{stringliteral}{"{}Something should have been chosen at this point"{}});}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00166}00166     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00167}00167     \textcolor{keyword}{private} \textcolor{keywordtype}{float} GetLowestValidValue(List<UtilityContainer> list)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00168}00168     \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00169}00169         \textcolor{keywordflow}{if} (list.Count() == 0)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00170}00170         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00171}00171             \textcolor{keywordflow}{return} \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00172}00172         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00173}00173         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (list.Count() < NumberOfItemsToEvaluate)}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00174}00174         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00175}00175             \textcolor{keywordflow}{return} list.Last().LastCalculatedUtility;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00176}00176         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00177}00177         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00178}00178         \{}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00179}00179             \textcolor{keywordflow}{return} list[NumberOfItemsToEvaluate -\/ 1].LastCalculatedUtility;}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00180}00180         \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00181}00181     \}}
\DoxyCodeLine{\Hypertarget{_u_c_s_random_from_x_highest_8cs_source_l00182}00182 \}}

\end{DoxyCode}
