\hypertarget{_sequence_execution_time_model_8cs_source}{}\doxysection{Sequence\+Execution\+Time\+Model.\+cs}
\label{_sequence_execution_time_model_8cs_source}\index{Runtime/Models/SequenceExecutionTimeModel.cs@{Runtime/Models/SequenceExecutionTimeModel.cs}}
\mbox{\hyperlink{_sequence_execution_time_model_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00001}00001 \textcolor{keyword}{using }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00002}00002 \textcolor{keyword}{using }System.Diagnostics;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00003}00003 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_uni_rx_1_1_internal_util}{UniRx.InternalUtil}};}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00004}\mbox{\hyperlink{_sequence_execution_time_model_8cs_a0100be52d45f14348918ea69ec09f959}{00004}} \textcolor{keyword}{using }\mbox{\hyperlink{_ai_view_model_8cs_a828eaed3a7fec21688af492b377d63ed}{Debug}} = UnityEngine.Debug;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00006}\mbox{\hyperlink{namespace_models}{00006}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_models}{Models}}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00007}00007 \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00008}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model}{00008}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model}{SequenceExecutionTimeModel}}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00009}00009     \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00010}00010         \textcolor{keyword}{internal} \textcolor{keywordtype}{string} Name;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00011}00011         \textcolor{keyword}{private} \textcolor{keywordtype}{int} currentIndex = 0;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00012}00012         \textcolor{keyword}{private} \textcolor{keywordtype}{int} exectutions = 0;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00013}00013         \textcolor{keyword}{private} List<Dictionary<string, float>> executionTimeByMethods = \textcolor{keyword}{new} List<Dictionary<string, float>>();}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00015}00015         \textcolor{keyword}{private} \textcolor{keywordtype}{float} totalTicks = 0;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00016}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a54fe64ca0315dd2fa352e9134d8f47b3}{00016}}         \textcolor{keyword}{public} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a54fe64ca0315dd2fa352e9134d8f47b3}{TotalTimeUs}} => TicksToUs(totalTicks);}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00017}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a5e5dbff4d49149a4b0e48c94b1c0ead3}{00017}}         \textcolor{keyword}{public} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a5e5dbff4d49149a4b0e48c94b1c0ead3}{AverageTimeUs}} => TicksToUs(totalTicks)/exectutions;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00018}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a9c18abcb1a07dd0591ac59eebfaeac21}{00018}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a9c18abcb1a07dd0591ac59eebfaeac21}{SequenceExecutionTimeModel}}(\textcolor{keywordtype}{string} name)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00019}00019         \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00020}00020             Name = name;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00022}00022         }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00023}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_aa4c17cd6e495225d7049ae0cd0ebc520}{00023}}         \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_aa4c17cd6e495225d7049ae0cd0ebc520}{Add}}(\textcolor{keywordtype}{string} methodName, \textcolor{keywordtype}{float} ticks, \textcolor{keywordtype}{bool} sequenceComplete = \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00024}00024         \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00025}00025             \textcolor{keywordflow}{if} (executionTimeByMethods.Count <= currentIndex)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00026}00026             \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00027}00027                 executionTimeByMethods.Add(\textcolor{keyword}{new} Dictionary<string, float>());}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00028}00028             \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00029}00029             var currentSequenceDictionary = executionTimeByMethods[currentIndex];}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00031}00031             \textcolor{keywordflow}{if} (!currentSequenceDictionary.ContainsKey(methodName))}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00032}00032             \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00033}00033                 currentSequenceDictionary.Add(methodName,0);}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00034}00034             \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00036}00036             currentSequenceDictionary[methodName] += ticks;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00037}00037             totalTicks += ticks;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00039}00039             \textcolor{keywordflow}{if} (sequenceComplete)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00040}00040             \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00041}00041                 exectutions++;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00042}00042             \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00044}00044         \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00046}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a48c7df3e893e78c28804998f6ad074f4}{00046}}         \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a48c7df3e893e78c28804998f6ad074f4}{Reset}}()}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00047}00047         \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00048}00048             executionTimeByMethods = \textcolor{keyword}{new} List<Dictionary<string, float>>();}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00049}00049         \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00051}\mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a90d3c4bdddfec2403de775c5b8e209b1}{00051}}         \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a90d3c4bdddfec2403de775c5b8e209b1}{PrintSum}}()}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00052}00052         \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00053}00053             var totalTicks = 0f;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00054}00054             var methodSum = \textcolor{keyword}{new} Dictionary<string, float>();}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00055}00055             \textcolor{keywordflow}{foreach} (var executionTimeByMethod \textcolor{keywordflow}{in} executionTimeByMethods)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00056}00056             \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00057}00057                 \textcolor{keywordflow}{foreach} (var entry \textcolor{keywordflow}{in} executionTimeByMethod)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00058}00058                 \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00059}00059                     \textcolor{keywordflow}{if} (!methodSum.ContainsKey(entry.Key))}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00060}00060                     \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00061}00061                         methodSum.Add(entry.Key,0);}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00062}00062                     \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00064}00064                     methodSum[entry.Key] += entry.Value;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00065}00065                     totalTicks += entry.Value;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00066}00066                 \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00067}00067             \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00069}00069             var totalTimeUs = TicksToUs(totalTicks);}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00070}00070             var averageTotalTime = totalTimeUs / exectutions;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00071}00071             DebugService.Log(\textcolor{stringliteral}{"{}Sequence: "{}} + Name + \textcolor{stringliteral}{"{} Total Time: "{}} + \$\textcolor{stringliteral}{"{}\{totalTimeUs:0,0.0\}"{}}  + \textcolor{stringliteral}{"{}us. Number of sequences: "{}} + exectutions, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00072}00072             DebugService.Log(\textcolor{stringliteral}{"{}Sequence: "{}} + Name + \textcolor{stringliteral}{"{} Average Time: "{}} + \$\textcolor{stringliteral}{"{}\{averageTotalTime:0,0.0\}"{}} + \textcolor{stringliteral}{"{}us. new avg time: "{}} + \mbox{\hyperlink{class_models_1_1_sequence_execution_time_model_a5e5dbff4d49149a4b0e48c94b1c0ead3}{AverageTimeUs}}, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00073}00073         \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00075}00075         \textcolor{keyword}{private} \textcolor{keywordtype}{float} TicksToUs(\textcolor{keywordtype}{float} ticks)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00076}00076         \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00077}00077             var microsecondsPrTick = 1000f * 1000f / Stopwatch.Frequency;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00078}00078             \textcolor{keywordflow}{return} ticks * microsecondsPrTick;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00079}00079         \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00080}00080         }
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00081}00081         \textcolor{keyword}{private} \textcolor{keywordtype}{float} TicksToMs(\textcolor{keywordtype}{float} ticks)}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00082}00082         \{}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00083}00083             var microsecondsPrTick = 1000f / Stopwatch.Frequency;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00084}00084             \textcolor{keywordflow}{return} ticks * microsecondsPrTick;}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00085}00085         \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00086}00086     \}}
\DoxyCodeLine{\Hypertarget{_sequence_execution_time_model_8cs_source_l00087}00087 \}}

\end{DoxyCode}
